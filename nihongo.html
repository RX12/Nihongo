<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Learner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .kana-char, .jp-font { /* Class for Japanese characters */
            font-family: 'Noto Sans JP', sans-serif;
        }
        .focusable:focus-visible {
            outline: 2px solid rgb(59 130 246); /* blue-500 */
            outline-offset: 2px;
        }
        .btn {
            @apply px-4 py-2 rounded-lg font-semibold transition-all duration-150 ease-in-out focusable;
        }
        .btn-primary {
            @apply bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 shadow-md;
        }
        .btn-secondary {
            @apply bg-gray-200 text-gray-700 hover:bg-gray-300 active:bg-gray-400 shadow-sm;
        }
        .btn-red {
            @apply bg-red-500 text-white hover:bg-red-600 active:red-700 shadow-md;
        }
        .btn-warning {
            @apply bg-yellow-500 text-white hover:bg-yellow-600 active:yellow-700 shadow-md;
        }
        .btn-green {
            @apply bg-green-500 text-white hover:bg-green-600 active:green-700 shadow-md;
        }
        .kana-display {
            font-weight: 300;
            margin-top: 1rem;
            margin-bottom: 1rem;
            font-size: 3rem; /* Good, large size for smartphones */
        }
        @media (min-width: 640px) {
            .kana-display {
                font-size: 3rem;
                margin-top: 1.5rem;
                margin-bottom: 1.5rem;
            }
        }
        @media (min-width: 768px) {
            .kana-display {
                font-size: 3rem;
            }
        }
        .feedback-correct {
            @apply text-green-600;
        }
        .feedback-incorrect {
            @apply text-red-600;
        }
        .kana-enter {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        .progress-bar-container {
            @apply w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden shadow;
        }
        .progress-bar {
            @apply bg-blue-600 h-4 rounded-full transition-all duration-300 ease-in-out text-xs flex items-center justify-center text-white;
        }
        @media (max-width: 767px) {
          #app-container {
            position: -webkit-sticky; /* For Safari compatibility */
            position: sticky;
            top: 1rem;
          }
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center min-h-screen p-4 antialiased">

    <div id="app-container" class="bg-white p-4 sm:p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-lg">

        <!-- Settings Screen -->
        <div id="settingsScreen">
            <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-6 sm:mb-8 jp-font">æ—¥æœ¬èªå­¦ç¿’ <span class="text-sm text-gray-500 block">Japanese Learner</span></h1>
            <div class="space-y-4 sm:space-y-6">
                <p class="text-gray-700 text-sm sm:text-base">Select the character sets you want to practice:</p>
                <div class="space-y-3">
                    <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer">
                        <input type="checkbox" id="useHiragana" class="form-checkbox h-5 w-5 text-blue-600 rounded focusable">
                        <span class="ml-3 text-gray-700 text-base sm:text-lg jp-font">ã²ã‚‰ãŒãª (Hiragana)</span>
                    </label>
                    <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer">
                        <input type="checkbox" id="useKatakana" class="form-checkbox h-5 w-5 text-blue-600 rounded focusable">
                        <span class="ml-3 text-gray-700 text-base sm:text-lg jp-font">ã‚«ã‚¿ã‚«ãƒŠ (Katakana)</span>
                    </label>
                    <label class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer">
                        <input type="checkbox" id="useExtendedKatakana" class="form-checkbox h-5 w-5 text-blue-600 rounded focusable">
                        <span class="ml-3 text-gray-700 text-base sm:text-lg jp-font">æ‹¡å¼µã‚«ã‚¿ã‚«ãƒŠ (Extended Katakana)</span>
                    </label>
                    <hr/>
                    <label class="flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer">
                        <input type="checkbox" id="useVocabulary" class="form-checkbox h-5 w-5 text-blue-600 rounded focusable">
                        <span class="ml-3 text-gray-700 text-base sm:text-lg jp-font">Vokabeln (Lektion 1-12)</span>
                    </label>
                </div>
                 <p id="noSetSelectedError" class="text-red-500 text-sm mt-2 hidden">Please select at least one character set.</p>
                <button id="startButton" class="w-full btn btn-primary text-base sm:text-lg py-2 sm:py-3">Start Learning</button>
            </div>
        </div>

        <!-- Learning Screen (Hidden by default) -->
        <div id="learningScreen" class="hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-700 jp-font">Practice Mode</h2>
                <button id="backToSettingsButton" class="btn btn-secondary text-xs sm:text-sm">&larr; Change Sets</button>
            </div>

            <div class="mb-2 text-xs sm:text-sm text-gray-600 text-center" id="progressLabel">Mastered: 0 / 0</div>
            <div class="progress-bar-container">
                <div id="progressBar" class="progress-bar" style="width: 0%;"></div>
            </div>

            <div id="characterDisplay" class="kana-display text-center text-gray-800 kana-char"></div>

            <div class="mt-4 mb-4">
                <input type="text" id="romajiInput" placeholder="Type Romaji here..." class="w-full p-3 border border-gray-300 rounded-lg text-base sm:text-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent focusable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
                <button id="submitGuessButton" class="btn btn-green w-full text-sm sm:text-base">Submit Guess</button>
                <button id="showAnswerButton" class="btn btn-secondary w-full text-sm sm:text-base">Show Answer</button>
            </div>

            <div id="feedbackArea" class="text-center text-base sm:text-lg min-h-[2.5em] mb-4 font-semibold"></div>

            <div class="grid grid-cols-2 gap-2 text-center text-gray-600 mb-4 text-xs sm:text-sm">
                <span id="queueCountDisplay" class="p-1 sm:p-2 bg-gray-100 rounded-md">In Queue: 0</span>
                <span id="attemptCountDisplay" class="p-1 sm:p-2 bg-gray-100 rounded-md">Attempts: 0</span>
            </div>

            <button id="nextCharacterButton" class="w-full btn btn-primary py-2 sm:py-3 text-base sm:text-lg mb-3" disabled>Next Character &rarr;</button>
            <button id="resetSessionButton" class="w-full btn btn-warning py-2 text-sm sm:text-base">Reset Current Session</button>
            
            <div id="completionMessage" class="hidden text-center mt-6 sm:mt-8 p-4 sm:p-6 bg-green-50 rounded-lg">
                <h3 class="text-xl sm:text-2xl font-semibold text-green-700 jp-font">ğŸ‰ç´ æ™´ã‚‰ã—ã„ï¼(Subarashii!)ğŸ‰</h3>
                <p class="text-gray-700 mt-2 text-sm sm:text-base">You've completed the session!</p>
                <p id="finalScore" class="text-base sm:text-lg font-medium text-gray-800 mt-2"></p>
                <button id="restartButton" class="mt-4 btn btn-primary text-sm sm:text-base">Practice Again</button>
            </div>
        </div>
    </div>

    <script>
        // --- Character Data ---
        const hiraganaChars = [
            { kana: "ã‚", romaji: "a" }, { kana: "ã„", romaji: "i" }, { kana: "ã†", romaji: "u" }, { kana: "ãˆ", romaji: "e" }, { kana: "ãŠ", romaji: "o" },
            { kana: "ã‹", romaji: "ka" }, { kana: "ã", romaji: "ki" }, { kana: "ã", romaji: "ku" }, { kana: "ã‘", romaji: "ke" }, { kana: "ã“", romaji: "ko" },
            { kana: "ã•", romaji: "sa" }, { kana: "ã—", romaji: "shi" }, { kana: "ã™", romaji: "su" }, { kana: "ã›", romaji: "se" }, { kana: "ã", romaji: "so" },
            { kana: "ãŸ", romaji: "ta" }, { kana: "ã¡", romaji: "chi" }, { kana: "ã¤", romaji: "tsu" }, { kana: "ã¦", romaji: "te" }, { kana: "ã¨", romaji: "to" },
            { kana: "ãª", romaji: "na" }, { kana: "ã«", romaji: "ni" }, { kana: "ã¬", romaji: "nu" }, { kana: "ã­", romaji: "ne" }, { kana: "ã®", romaji: "no" },
            { kana: "ã¯", romaji: "ha" }, { kana: "ã²", romaji: "hi" }, { kana: "ãµ", romaji: "fu" }, { kana: "ã¸", romaji: "he" }, { kana: "ã»", romaji: "ho" },
            { kana: "ã¾", romaji: "ma" }, { kana: "ã¿", romaji: "mi" }, { kana: "ã‚€", romaji: "mu" }, { kana: "ã‚", romaji: "me" }, { kana: "ã‚‚", romaji: "mo" },
            { kana: "ã‚„", romaji: "ya" }, { kana: "ã‚†", romaji: "yu" }, { kana: "ã‚ˆ", romaji: "yo" },
            { kana: "ã‚‰", romaji: "ra" }, { kana: "ã‚Š", romaji: "ri" }, { kana: "ã‚‹", romaji: "ru" }, { kana: "ã‚Œ", romaji: "re" }, { kana: "ã‚", romaji: "ro" },
            { kana: "ã‚", romaji: "wa" }, { kana: "ã‚’", romaji: "o" }, { kana: "ã‚“", romaji: "n" },
            { kana: "ãŒ", romaji: "ga" }, { kana: "ã", romaji: "gi" }, { kana: "ã", romaji: "gu" }, { kana: "ã’", romaji: "ge" }, { kana: "ã”", romaji: "go" },
            { kana: "ã–", romaji: "za" }, { kana: "ã˜", romaji: "ji" }, { kana: "ãš", romaji: "zu" }, { kana: "ãœ", romaji: "ze" }, { kana: "ã", romaji: "zo" },
            { kana: "ã ", romaji: "da" }, { kana: "ã¢", romaji: "ji" }, { kana: "ã¥", romaji: "zu" }, { kana: "ã§", romaji: "de" }, { kana: "ã©", romaji: "do" },
            { kana: "ã°", romaji: "ba" }, { kana: "ã³", romaji: "bi" }, { kana: "ã¶", romaji: "bu" }, { kana: "ã¹", romaji: "be" }, { kana: "ã¼", romaji: "bo" },
            { kana: "ã±", romaji: "pa" }, { kana: "ã´", romaji: "pi" }, { kana: "ã·", romaji: "pu" }, { kana: "ãº", romaji: "pe" }, { kana: "ã½", romaji: "po" },
            { kana: "ãã‚ƒ", romaji: "kya" }, { kana: "ãã‚…", romaji: "kyu" }, { kana: "ãã‚‡", romaji: "kyo" },
            { kana: "ã—ã‚ƒ", romaji: "sha" }, { kana: "ã—ã‚…", romaji: "shu" }, { kana: "ã—ã‚‡", romaji: "sho" },
            { kana: "ã¡ã‚ƒ", romaji: "cha" }, { kana: "ã¡ã‚…", romaji: "chu" }, { kana: "ã¡ã‚‡", romaji: "cho" },
            { kana: "ã«ã‚ƒ", romaji: "nya" }, { kana: "ã«ã‚…", romaji: "nyu" }, { kana: "ã«ã‚‡", romaji: "nyo" },
            { kana: "ã²ã‚ƒ", romaji: "hya" }, { kana: "ã²ã‚…", romaji: "hyu" }, { kana: "ã²ã‚‡", romaji: "hyo" },
            { kana: "ã¿ã‚ƒ", romaji: "mya" }, { kana: "ã¿ã‚…", romaji: "myu" }, { kana: "ã¿ã‚‡", romaji: "myo" },
            { kana: "ã‚Šã‚ƒ", romaji: "rya" }, { kana: "ã‚Šã‚…", romaji: "ryu" }, { kana: "ã‚Šã‚‡", romaji: "ryo" },
            { kana: "ãã‚ƒ", romaji: "gya" }, { kana: "ãã‚…", romaji: "gyu" }, { kana: "ãã‚‡", romaji: "gyo" },
            { kana: "ã˜ã‚ƒ", romaji: "ja" }, { kana: "ã˜ã‚…", romaji: "ju" }, { kana: "ã˜ã‚‡", romaji: "jo" },
            { kana: "ã¢ã‚ƒ", romaji: "ja" }, { kana: "ã¢ã‚…", romaji: "ju" }, { kana: "ã¢ã‚‡", romaji: "jo" },
            { kana: "ã³ã‚ƒ", romaji: "bya" }, { kana: "ã³ã‚…", romaji: "byu" }, { kana: "ã³ã‚‡", romaji: "byo" },
            { kana: "ã´ã‚ƒ", romaji: "pya" }, { kana: "ã´ã‚…", romaji: "pyu" }, { kana: "ã´ã‚‡", romaji: "pyo" }
        ];
        const katakanaChars = [
            { kana: "ã‚¢", romaji: "a" }, { kana: "ã‚¤", romaji: "i" }, { kana: "ã‚¦", romaji: "u" }, { kana: "ã‚¨", romaji: "e" }, { kana: "ã‚ª", romaji: "o" },
            { kana: "ã‚«", romaji: "ka" }, { kana: "ã‚­", romaji: "ki" }, { kana: "ã‚¯", romaji: "ku" }, { kana: "ã‚±", romaji: "ke" }, { kana: "ã‚³", romaji: "ko" },
            { kana: "ã‚µ", romaji: "sa" }, { kana: "ã‚·", romaji: "shi" }, { kana: "ã‚¹", romaji: "su" }, { kana: "ã‚»", romaji: "se" }, { kana: "ã‚½", romaji: "so" },
            { kana: "ã‚¿", romaji: "ta" }, { kana: "ãƒ", romaji: "chi" }, { kana: "ãƒ„", romaji: "tsu" }, { kana: "ãƒ†", romaji: "te" }, { kana: "ãƒˆ", romaji: "to" },
            { kana: "ãƒŠ", romaji: "na" }, { kana: "ãƒ‹", romaji: "ni" }, { kana: "ãƒŒ", romaji: "nu" }, { kana: "ãƒ", romaji: "ne" }, { kana: "ãƒ", romaji: "no" },
            { kana: "ãƒ", romaji: "ha" }, { kana: "ãƒ’", romaji: "hi" }, { kana: "ãƒ•", romaji: "fu" }, { kana: "ãƒ˜", romaji: "he" }, { kana: "ãƒ›", romaji: "ho" },
            { kana: "ãƒ", romaji: "ma" }, { kana: "ãƒŸ", romaji: "mi" }, { kana: "ãƒ ", romaji: "mu" }, { kana: "ãƒ¡", romaji: "me" }, { kana: "ãƒ¢", romaji: "mo" },
            { kana: "ãƒ¤", romaji: "ya" }, { kana: "ãƒ¦", romaji: "yu" }, { kana: "ãƒ¨", romaji: "yo" },
            { kana: "ãƒ©", romaji: "ra" }, { kana: "ãƒª", romaji: "ri" }, { kana: "ãƒ«", romaji: "ru" }, { kana: "ãƒ¬", romaji: "re" }, { kana: "ãƒ­", romaji: "ro" },
            { kana: "ãƒ¯", romaji: "wa" }, { kana: "ãƒ²", romaji: "o" }, { kana: "ãƒ³", romaji: "n" },
            { kana: "ã‚¬", romaji: "ga" }, { kana: "ã‚®", romaji: "gi" }, { kana: "ã‚°", romaji: "gu" }, { kana: "ã‚²", romaji: "ge" }, { kana: "ã‚´", romaji: "go" },
            { kana: "ã‚¶", romaji: "za" }, { kana: "ã‚¸", romaji: "ji" }, { kana: "ã‚º", romaji: "zu" }, { kana: "ã‚¼", romaji: "ze" }, { kana: "ã‚¾", romaji: "zo" },
            { kana: "ãƒ€", romaji: "da" }, { kana: "ãƒ‚", romaji: "ji" }, { kana: "ãƒ…", romaji: "zu" }, { kana: "ãƒ‡", romaji: "de" }, { kana: "ãƒ‰", romaji: "do" },
            { kana: "ãƒ", romaji: "ba" }, { kana: "ãƒ“", romaji: "bi" }, { kana: "ãƒ–", romaji: "bu" }, { kana: "ãƒ™", romaji: "be" }, { kana: "ãƒœ", romaji: "bo" },
            { kana: "ãƒ‘", romaji: "pa" }, { kana: "ãƒ”", romaji: "pi" }, { kana: "ãƒ—", romaji: "pu" }, { kana: "ãƒš", romaji: "pe" }, { kana: "ãƒ", romaji: "po" },
            { kana: "ã‚­ãƒ£", romaji: "kya" }, { kana: "ã‚­ãƒ¥", romaji: "kyu" }, { kana: "ã‚­ãƒ§", romaji: "kyo" },
            { kana: "ã‚·ãƒ£", romaji: "sha" }, { kana: "ã‚·ãƒ¥", romaji: "shu" }, { kana: "ã‚·ãƒ§", romaji: "sho" },
            { kana: "ãƒãƒ£", romaji: "cha" }, { kana: "ãƒãƒ¥", romaji: "chu" }, { kana: "ãƒãƒ§", romaji: "cho" },
            { kana: "ãƒ‹ãƒ£", romaji: "nya" }, { kana: "ãƒ‹ãƒ¥", romaji: "nyu" }, { kana: "ãƒ‹ãƒ§", romaji: "nyo" },
            { kana: "ãƒ’ãƒ£", romaji: "hya" }, { kana: "ãƒ’ãƒ¥", romaji: "hyu" }, { kana: "ãƒ’ãƒ§", romaji: "hyo" },
            { kana: "ãƒŸãƒ£", romaji: "mya" }, { kana: "ãƒŸãƒ¥", romaji: "myu" }, { kana: "ãƒŸãƒ§", romaji: "myo" },
            { kana: "ãƒªãƒ£", romaji: "rya" }, { kana: "ãƒªãƒ¥", romaji: "ryu" }, { kana: "ãƒªãƒ§", romaji: "ryo" },
            { kana: "ã‚®ãƒ£", romaji: "gya" }, { kana: "ã‚®ãƒ¥", romaji: "gyu" }, { kana: "ã‚®ãƒ§", romaji: "gyo" },
            { kana: "ã‚¸ãƒ£", romaji: "ja" }, { kana: "ã‚¸ãƒ¥", romaji: "ju" }, { kana: "ã‚¸ãƒ§", romaji: "jo" },
            { kana: "ãƒ“ãƒ£", romaji: "bya" }, { kana: "ãƒ“ãƒ¥", romaji: "byu" }, { kana: "ãƒ“ãƒ§", romaji: "byo" },
            { kana: "ãƒ”ãƒ£", romaji: "pya" }, { kana: "ãƒ”ãƒ¥", romaji: "pyu" }, { kana: "ãƒ”ãƒ§", romaji: "pyo" }
        ];
        const extendedKatakanaChars = [
            { kana: "ã‚·ã‚§", romaji: "she" }, { kana: "ãƒã‚§", romaji: "che" },
            { kana: "ãƒ„ã‚¡", romaji: "tsa" }, { kana: "ãƒ„ã‚§", romaji: "tse" }, { kana: "ãƒ„ã‚©", romaji: "tso" },
            { kana: "ãƒ†ã‚£", romaji: "ti" }, { kana: "ãƒ‡ã‚£", romaji: "di" },
            { kana: "ãƒ•ã‚¡", romaji: "fa" }, { kana: "ãƒ•ã‚£", romaji: "fi" }, { kana: "ãƒ•ã‚§", romaji: "fe" }, { kana: "ãƒ•ã‚©", romaji: "fo" },
            { kana: "ã‚¸ã‚§", romaji: "je" }, { kana: "ãƒ‡ãƒ¥", romaji: "dyu" }, { kana: "ã‚¤ã‚§", romaji: "ye" },
            { kana: "ã‚¦ã‚£", romaji: "wi" }, { kana: "ã‚¦ã‚§", romaji: "we" }, { kana: "ã‚¦ã‚©", romaji: "wo" },
            { kana: "ã‚¯ã‚¡", romaji: "kwa" }, { kana: "ã‚¯ã‚£", romaji: "kwi" }, { kana: "ã‚¯ã‚§", romaji: "kwe" }, { kana: "ã‚¯ã‚©", romaji: "kwo" },
            { kana: "ãƒ„ã‚£", romaji: "tsi" },
            { kana: "ãƒˆã‚¥", romaji: "tu" }, { kana: "ãƒ‰ã‚¥", romaji: "du" },
            { kana: "ãƒ´ã‚¡", romaji: "va" }, { kana: "ãƒ´ã‚£", romaji: "vi" }, { kana: "ãƒ´", romaji: "vu" }, { kana: "ãƒ´ã‚§", romaji: "ve" }, { kana: "ãƒ´ã‚©", romaji: "vo" },
            { kana: "ãƒ†ãƒ¥", romaji: "tyu" }, { kana: "ãƒ•ãƒ¥", romaji: "fyu" }, { kana: "ãƒ´ãƒ¥", romaji: "vyu" }
        ];

        // --- CORRECTED DATA: Vocabulary Lessons 1-12 (Kanji removed) ---
        const vocabularyL1_12 = [
            // Lesson 1
            { kana: "ã‚ãŸã—", romaji: "watashi", german: "ich" },
            { kana: "ã‚ãªãŸ", romaji: "anata", german: "du" },
            { kana: "ã‚ã®ã²ã¨", romaji: "ano hito", german: "er/sie/es" },
            { kana: "ã¯ã„", romaji: "hai", german: "ja" },
            { kana: "ã„ã„ãˆ", romaji: "iie", german: "nein" },
            { kana: "ã‚ã‚ŠãŒã¨ã†", romaji: "arigato", german: "danke" },
            { kana: "ã©ã†ã„ãŸã—ã¾ã—ã¦", romaji: "do itashimashite", german: "bitte" },
            { kana: "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™", romaji: "ohayo gozaimasu", german: "Guten Morgen" },
            { kana: "ã“ã‚“ã«ã¡ã¯", romaji: "konnichiwa", german: "Guten Tag" },
            { kana: "ã“ã‚“ã°ã‚“ã¯", romaji: "konbanwa", german: "Guten Abend" },
            { kana: "ãŠã‚„ã™ã¿ãªã•ã„", romaji: "oyasuminasai", german: "Gute Nacht" },
            { kana: "ã•ã‚ˆã†ãªã‚‰", romaji: "sayonara", german: "Auf Wiedersehen" },
            { kana: "ã™ã¿ã¾ã›ã‚“", romaji: "sumimasen", german: "Entschuldigung" },
            { kana: "ãŠã’ã‚“ãã§ã™ã‹", romaji: "o genki desu ka", german: "Wie geht es Ihnen?" },
            { kana: "ã’ã‚“ãã§ã™", romaji: "genki desu", german: "gut" },
            { kana: "ãŠãªã¾ãˆã¯ãªã‚“ã§ã™ã‹", romaji: "o namae wa nan desu ka", german: "Wie heiÃŸen Sie?" },
            { kana: "ã‚ãŸã—ã¯...ã§ã™", romaji: "watashi wa ... desu", german: "Ich heiÃŸe..." },
            { kana: "ã©ã¡ã‚‰ã‹ã‚‰ã§ã™ã‹", romaji: "dochira kara desu ka", german: "Woher kommen Sie?" },
            { kana: "ã‚ãŸã—ã¯...ã‹ã‚‰ãã¾ã—ãŸ", romaji: "watashi wa ... kara kimashita", german: "Ich komme aus..." },
            { kana: "ã›ã‚“ã›ã„", romaji: "sensei", german: "Lehrer(in)" },
            { kana: "ãŒãã›ã„", romaji: "gakusei", german: "SchÃ¼ler(in)" },
            { kana: "ã ã„ãŒãã›ã„", romaji: "daigakusei", german: "Student(in)" },
            { kana: "ã„ã—ã‚ƒ", romaji: "isha", german: "Arzt/Ã„rztin" },
            { kana: "ã‹ã„ã—ã‚ƒã„ã‚“", romaji: "kaishain", german: "Angestellte(r)" },
            { kana: "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", romaji: "enjinia", german: "Ingenieur(in)" },
            { kana: "ãã‚“ã“ã†ã„ã‚“", romaji: "ginkoin", german: "Bankangestellte(r)" },
            { kana: "ã«ã»ã‚“", romaji: "nihon", german: "Japan" },
            { kana: "ãƒ‰ã‚¤ãƒ„", romaji: "doitsu", german: "Deutschland" },
            { kana: "ã‚¢ãƒ¡ãƒªã‚«", romaji: "amerika", german: "USA" },
            { kana: "ã¡ã‚…ã†ã”ã", romaji: "chugoku", german: "China" },
            { kana: "ã‹ã‚“ã“ã", romaji: "kankoku", german: "Korea" },
            // Lesson 2
            { kana: "ã“ã‚Œ", romaji: "kore", german: "dies (hier)" },
            { kana: "ãã‚Œ", romaji: "sore", german: "das (da)" },
            { kana: "ã‚ã‚Œ", romaji: "are", german: "jenes (dort)" },
            { kana: "ã©ã‚Œ", romaji: "dore", german: "welches?" },
            { kana: "ã“ã®", romaji: "kono", german: "dieses/r/e" },
            { kana: "ã‚ã®", romaji: "ano", german: "jenes/r/e" },
            { kana: "ã©ã®", romaji: "dono", german: "welches/r/e?" },
            { kana: "ã»ã‚“", romaji: "hon", german: "Buch" },
            { kana: "ã˜ã—ã‚‡", romaji: "jisho", german: "WÃ¶rterbuch" },
            { kana: "ã–ã£ã—", romaji: "zasshi", german: "Zeitschrift" },
            { kana: "ã—ã‚“ã¶ã‚“", romaji: "shinbun", german: "Zeitung" },
            { kana: "ãƒãƒ¼ãƒˆ", romaji: "noto", german: "Notizbuch" },
            { kana: "ã‚ã„ã—", romaji: "meishi", german: "Visitenkarte" },
            { kana: "ã‚«ãƒ¼ãƒ‰", romaji: "kado", german: "Karte" },
            { kana: "ãˆã‚“ã´ã¤", romaji: "enpitsu", german: "Bleistift" },
            { kana: "ãƒœãƒ¼ãƒ«ãƒšãƒ³", romaji: "borupen", german: "Kugelschreiber" },
            { kana: "ã‹ã", romaji: "kagi", german: "SchlÃ¼ssel" },
            { kana: "ã¨ã‘ã„", romaji: "tokei", german: "Uhr" },
            { kana: "ã‹ã•", romaji: "kasa", german: "Regenschirm" },
            { kana: "ã‹ã°ã‚“", romaji: "kaban", german: "Tasche" },
            { kana: "ãƒ†ãƒ¬ãƒ“", romaji: "terebi", german: "Fernseher" },
            { kana: "ãƒ©ã‚¸ã‚ª", romaji: "rajio", german: "Radio" },
            { kana: "ã‚«ãƒ¡ãƒ©", romaji: "kamera", german: "Kamera" },
            { kana: "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼", romaji: "konpyuta", german: "Computer" },
            { kana: "ã˜ã©ã†ã—ã‚ƒ", romaji: "jidosha", german: "Auto" },
            { kana: "ã¤ããˆ", romaji: "tsukue", german: "Schreibtisch" },
            { kana: "ã„ã™", romaji: "isu", german: "Stuhl" },
            { kana: "ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆ", romaji: "chokoreto", german: "Schokolade" },
            { kana: "ã‚³ãƒ¼ãƒ’ãƒ¼", romaji: "kohi", german: "Kaffee" },
            { kana: "ãŠã¿ã‚„ã’", romaji: "omiyage", german: "Souvenir" },
            // Lesson 3
            { kana: "ã“ã“", romaji: "koko", german: "hier, dieser Ort" },
            { kana: "ãã“", romaji: "soko", german: "da, dieser Ort" },
            { kana: "ã‚ãã“", romaji: "asoko", german: "dort, jener Ort" },
            { kana: "ã©ã“", romaji: "doko", german: "wo?" },
            { kana: "ã“ã¡ã‚‰", romaji: "kochira", german: "hier (hÃ¶flich)" },
            { kana: "ãã¡ã‚‰", romaji: "sochira", german: "da (hÃ¶flich)" },
            { kana: "ã‚ã¡ã‚‰", romaji: "achira", german: "dort (hÃ¶flich)" },
            { kana: "ã©ã¡ã‚‰", romaji: "dochira", german: "wo? (hÃ¶flich)" },
            { kana: "ãã‚‡ã†ã—ã¤", romaji: "kyoshitsu", german: "Klassenraum" },
            { kana: "ã—ã‚‡ãã©ã†", romaji: "shokudo", german: "Speisesaal, Kantine" },
            { kana: "ã˜ã‚€ã—ã‚‡", romaji: "jimusho", german: "BÃ¼ro" },
            { kana: "ã‹ã„ãã—ã¤", romaji: "kaigishitsu", german: "Konferenzraum" },
            { kana: "ã†ã‘ã¤ã‘", romaji: "uketsuke", german: "Rezeption" },
            { kana: "ãƒ­ãƒ“ãƒ¼", romaji: "robi", german: "Lobby" },
            { kana: "ãƒˆã‚¤ãƒ¬", romaji: "toire", german: "Toilette" },
            { kana: "ã‹ã„ã ã‚“", romaji: "kaidan", german: "Treppe" },
            { kana: "ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼", romaji: "erebeta", german: "Aufzug" },
            { kana: "ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚¿ãƒ¼", romaji: "esukareta", german: "Rolltreppe" },
            { kana: "ãŠãã«", romaji: "okuni", german: "Ihr Land" },
            { kana: "ã‹ã„ã—ã‚ƒ", romaji: "kaisha", german: "Firma" },
            { kana: "ã†ã¡", romaji: "uchi", german: "Zuhause, Haus" },
            { kana: "ã§ã‚“ã‚", romaji: "denwa", german: "Telefon" },
            { kana: "ãã¤", romaji: "kutsu", german: "Schuhe" },
            { kana: "ãƒã‚¯ã‚¿ã‚¤", romaji: "nekutai", german: "Krawatte" },
            { kana: "ãƒ¯ã‚¤ãƒ³", romaji: "wain", german: "Wein" },
            { kana: "ã†ã‚Šã°", romaji: "uriba", german: "Verkaufsabteilung" },
            { kana: "ã¡ã‹", romaji: "chika", german: "Untergeschoss" },
            { kana: "ã€œã‹ã„", romaji: "kai", german: "... Stockwerk" },
            { kana: "ãªã‚“ãŒã„", romaji: "nan-gai", german: "Welches Stockwerk?" },
            { kana: "ã€œãˆã‚“", romaji: "en", german: "... Yen" },
            { kana: "ã„ãã‚‰", romaji: "ikura", german: "Wie viel?" },
            // Lesson 4
            { kana: "ãŠãã¾ã™", romaji: "okimasu", german: "aufstehen" },
            { kana: "ã­ã¾ã™", romaji: "nemasu", german: "schlafen" },
            { kana: "ã¯ãŸã‚‰ãã¾ã™", romaji: "hatarakimasu", german: "arbeiten" },
            { kana: "ã‚„ã™ã¿ã¾ã™", romaji: "yasumimasu", german: "sich ausruhen" },
            { kana: "ã¹ã‚“ãã‚‡ã†ã—ã¾ã™", romaji: "benkyoshimasu", german: "lernen" },
            { kana: "ãŠã‚ã‚Šã¾ã™", romaji: "owarimasu", german: "enden" },
            { kana: "ãƒ‡ãƒ‘ãƒ¼ãƒˆ", romaji: "depato", german: "Kaufhaus" },
            { kana: "ãã‚“ã“ã†", romaji: "ginko", german: "Bank" },
            { kana: "ã‚†ã†ã³ã‚“ãã‚‡ã", romaji: "yubinkyoku", german: "Post" },
            { kana: "ã¨ã—ã‚‡ã‹ã‚“", romaji: "toshokan", german: "Bibliothek" },
            { kana: "ã³ã˜ã‚…ã¤ã‹ã‚“", romaji: "bijutsukan", german: "Kunstmuseum" },
            { kana: "ã„ã¾", romaji: "ima", german: "jetzt" },
            { kana: "ã€œã˜", romaji: "ji", german: "... Uhr" },
            { kana: "ã€œãµã‚“ / ã·ã‚“", romaji: "fun / pun", german: "... Minute(n)" },
            { kana: "ã¯ã‚“", romaji: "han", german: "halb" },
            { kana: "ãªã‚“ã˜", romaji: "nan-ji", german: "Wie viel Uhr?" },
            { kana: "ãªã‚“ã·ã‚“", romaji: "nan-pun", german: "Wievielte Minute?" },
            { kana: "ã”ãœã‚“", romaji: "gozen", german: "Vormittag" },
            { kana: "ã”ã”", romaji: "gogo", german: "Nachmittag" },
            { kana: "ã‚ã•", romaji: "asa", german: "Morgen" },
            { kana: "ã²ã‚‹", romaji: "hiru", german: "Mittag" },
            { kana: "ã°ã‚“ / ã‚ˆã‚‹", romaji: "ban / yoru", german: "Abend/Nacht" },
            { kana: "ãŠã¨ã¨ã„", romaji: "ototoi", german: "vorgestern" },
            { kana: "ãã®ã†", romaji: "kino", german: "gestern" },
            { kana: "ãã‚‡ã†", romaji: "kyo", german: "heute" },
            { kana: "ã‚ã—ãŸ", romaji: "ashita", german: "morgen" },
            { kana: "ã‚ã•ã£ã¦", romaji: "asatte", german: "Ã¼bermorgen" },
            { kana: "ã‘ã•", romaji: "kesa", german: "heute Morgen" },
            { kana: "ã“ã‚“ã°ã‚“", romaji: "konban", german: "heute Abend" },
            { kana: "ã‚„ã™ã¿", romaji: "yasumi", german: "Urlaub, frei" },
            { kana: "ã²ã‚‹ã‚„ã™ã¿", romaji: "hiruyasumi", german: "Mittagspause" },
            { kana: "ã¾ã„ã‚ã•", romaji: "maiasa", german: "jeden Morgen" },
            { kana: "ã¾ã„ã°ã‚“", romaji: "maiban", german: "jeden Abend" },
            { kana: "ã¾ã„ã«ã¡", romaji: "mainichi", german: "jeden Tag" },
            { kana: "ã’ã¤ã‚ˆã†ã³", romaji: "getsuyobi", german: "Montag" },
            { kana: "ã‹ã‚ˆã†ã³", romaji: "kayobi", german: "Dienstag" },
            { kana: "ã™ã„ã‚ˆã†ã³", romaji: "suiyobi", german: "Mittwoch" },
            { kana: "ã‚‚ãã‚ˆã†ã³", romaji: "mokuyobi", german: "Donnerstag" },
            { kana: "ãã‚“ã‚ˆã†ã³", romaji: "kinyobi", german: "Freitag" },
            { kana: "ã©ã‚ˆã†ã³", romaji: "doyobi", german: "Samstag" },
            { kana: "ã«ã¡ã‚ˆã†ã³", romaji: "nichiyobi", german: "Sonntag" },
            { kana: "ãªã‚“ã‚ˆã†ã³", romaji: "nan-yobi", german: "Welcher Wochentag?" },
            { kana: "ã°ã‚“ã”ã†", romaji: "bango", german: "Nummer" },
            { kana: "ãªã‚“ã°ã‚“", romaji: "nan-ban", german: "Welche Nummer?" },
            { kana: "ã€œã‹ã‚‰", romaji: "kara", german: "von..." },
            { kana: "ã€œã¾ã§", romaji: "made", german: "bis..." },
            { kana: "ã€œã¨ã€œ", romaji: "to", german: "und (Verbindung v. Nomen)" },
            // Lesson 5
            { kana: "ã„ãã¾ã™", romaji: "ikimasu", german: "gehen, fahren" },
            { kana: "ãã¾ã™", romaji: "kimasu", german: "kommen" },
            { kana: "ã‹ãˆã‚Šã¾ã™", romaji: "kaerimasu", german: "heimkehren" },
            { kana: "ãŒã£ã“ã†", romaji: "gakko", german: "Schule" },
            { kana: "ã‚¹ãƒ¼ãƒ‘ãƒ¼", romaji: "supa", german: "Supermarkt" },
            { kana: "ãˆã", romaji: "eki", german: "Bahnhof" },
            { kana: "ã²ã“ã†ã", romaji: "hikoki", german: "Flugzeug" },
            { kana: "ãµã­", romaji: "fune", german: "Schiff" },
            { kana: "ã§ã‚“ã—ã‚ƒ", romaji: "densha", german: "elektrischer Zug" },
            { kana: "ã¡ã‹ã¦ã¤", romaji: "chikatetsu", german: "U-Bahn" },
            { kana: "ã—ã‚“ã‹ã‚“ã›ã‚“", romaji: "shinkansen", german: "Shinkansen" },
            { kana: "ãƒã‚¹", romaji: "basu", german: "Bus" },
            { kana: "ã‚¿ã‚¯ã‚·ãƒ¼", romaji: "takushi", german: "Taxi" },
            { kana: "ã˜ã¦ã‚“ã—ã‚ƒ", romaji: "jitensha", german: "Fahrrad" },
            { kana: "ã‚ã‚‹ã„ã¦", romaji: "aruite", german: "zu FuÃŸ" },
            { kana: "ã²ã¨", romaji: "hito", german: "Person, Leute" },
            { kana: "ã¨ã‚‚ã ã¡", romaji: "tomodachi", german: "Freund" },
            { kana: "ã‹ã‚Œ", romaji: "kare", german: "er, Freund" },
            { kana: "ã‹ã®ã˜ã‚‡", romaji: "kanojo", german: "sie, Freundin" },
            { kana: "ã‹ãã", romaji: "kazoku", german: "Familie" },
            { kana: "ã²ã¨ã‚Šã§", romaji: "hitori de", german: "allein" },
            { kana: "ã›ã‚“ã—ã‚…ã†", romaji: "senshu", german: "letzte Woche" },
            { kana: "ã“ã‚“ã—ã‚…ã†", romaji: "konshu", german: "diese Woche" },
            { kana: "ã‚‰ã„ã—ã‚…ã†", romaji: "raishu", german: "nÃ¤chste Woche" },
            { kana: "ã›ã‚“ã’ã¤", romaji: "sengetsu", german: "letzter Monat" },
            { kana: "ã“ã‚“ã’ã¤", romaji: "kongetsu", german: "dieser Monat" },
            { kana: "ã‚‰ã„ã’ã¤", romaji: "raigetsu", german: "nÃ¤chster Monat" },
            { kana: "ãã‚‡ã­ã‚“", romaji: "kyonen", german: "letztes Jahr" },
            { kana: "ã“ã¨ã—", romaji: "kotoshi", german: "dieses Jahr" },
            { kana: "ã‚‰ã„ã­ã‚“", romaji: "rainen", german: "nÃ¤chstes Jahr" },
            { kana: "ãªã‚“ãŒã¤", romaji: "nan-gatsu", german: "welcher Monat?" },
            { kana: "ã¤ã„ãŸã¡", romaji: "tsuitachi", german: "1. Tag d. Monats" },
            { kana: "ãµã¤ã‹", romaji: "futsuka", german: "2. Tag d. Monats" },
            { kana: "ã¿ã£ã‹", romaji: "mikka", german: "3. Tag d. Monats" },
            { kana: "ã‚ˆã£ã‹", romaji: "yokka", german: "4. Tag d. Monats" },
            { kana: "ã„ã¤ã‹", romaji: "itsuka", german: "5. Tag d. Monats" },
            { kana: "ã‚€ã„ã‹", romaji: "muika", german: "6. Tag d. Monats" },
            { kana: "ãªã®ã‹", romaji: "nanoka", german: "7. Tag d. Monats" },
            { kana: "ã‚ˆã†ã‹", romaji: "yoka", german: "8. Tag d. Monats" },
            { kana: "ã“ã“ã®ã‹", romaji: "kokonoka", german: "9. Tag d. Monats" },
            { kana: "ã¨ãŠã‹", romaji: "toka", german: "10. Tag d. Monats" },
            { kana: "ã˜ã‚…ã†ã‚ˆã£ã‹", romaji: "juyokka", german: "14. Tag d. Monats" },
            { kana: "ã¯ã¤ã‹", romaji: "hatsuka", german: "20. Tag d. Monats" },
            { kana: "ã«ã˜ã‚…ã†ã‚ˆã£ã‹", romaji: "nijuyokka", german: "24. Tag d. Monats" },
            { kana: "ãªã‚“ã«ã¡", romaji: "nan-nichi", german: "welcher Tag?" },
            { kana: "ã„ã¤", romaji: "itsu", german: "wann?" },
            { kana: "ãŸã‚“ã˜ã‚‡ã†ã³", romaji: "tanjobi", german: "Geburtstag" },
            { kana: "ã¤ãã®", romaji: "tsugi no", german: "der/die/das NÃ¤chste" },
            { kana: "ãµã¤ã†", romaji: "futsu", german: "gewÃ¶hnlicher Zug" },
            { kana: "ãã‚…ã†ã“ã†", romaji: "kyuko", german: "Eilzug" },
            { kana: "ã¨ã£ãã‚…ã†", romaji: "tokkyu", german: "Superexpress" },
            // Lesson 6
            { kana: "ãŸã¹ã¾ã™", romaji: "tabemasu", german: "essen" },
            { kana: "ã®ã¿ã¾ã™", romaji: "nomimasu", german: "trinken" },
            { kana: "ã™ã„ã¾ã™", romaji: "suimasu", german: "rauchen" },
            { kana: "ã¿ã¾ã™", romaji: "mimasu", german: "(an)schauen" },
            { kana: "ããã¾ã™", romaji: "kikimasu", german: "hÃ¶ren" },
            { kana: "ã‚ˆã¿ã¾ã™", romaji: "yomimasu", german: "lesen" },
            { kana: "ã‹ãã¾ã™", romaji: "kakimasu", german: "schreiben" },
            { kana: "ã‹ã„ã¾ã™", romaji: "kaimasu", german: "kaufen" },
            { kana: "ã¨ã‚Šã¾ã™", romaji: "torimasu", german: "ein Foto machen" },
            { kana: "ã—ã¾ã™", romaji: "shimasu", german: "tun, machen" },
            { kana: "ã‚ã„ã¾ã™", romaji: "aimasu", german: "treffen" },
            { kana: "ã”ã¯ã‚“", romaji: "gohan", german: "Reis, Mahlzeit" },
            { kana: "ã‚ã•ã”ã¯ã‚“", romaji: "asagohan", german: "FrÃ¼hstÃ¼ck" },
            { kana: "ã²ã‚‹ã”ã¯ã‚“", romaji: "hirugohan", german: "Mittagessen" },
            { kana: "ã°ã‚“ã”ã¯ã‚“", romaji: "bangohan", german: "Abendessen" },
            { kana: "ãƒ‘ãƒ³", romaji: "pan", german: "Brot" },
            { kana: "ãŸã¾ã”", romaji: "tamago", german: "Ei" },
            { kana: "ã«ã", romaji: "niku", german: "Fleisch" },
            { kana: "ã•ã‹ãª", romaji: "sakana", german: "Fisch" },
            { kana: "ã‚„ã•ã„", romaji: "yasai", german: "GemÃ¼se" },
            { kana: "ãã ã‚‚ã®", romaji: "kudamono", german: "Obst" },
            { kana: "ã¿ãš", romaji: "mizu", german: "Wasser" },
            { kana: "ãŠã¡ã‚ƒ", romaji: "ocha", german: "grÃ¼ner Tee" },
            { kana: "ã“ã†ã¡ã‚ƒ", romaji: "kocha", german: "schwarzer Tee" },
            { kana: "ãã‚…ã†ã«ã‚…ã†", romaji: "gyunyu", german: "Milch" },
            { kana: "ã‚¸ãƒ¥ãƒ¼ã‚¹", romaji: "jusu", german: "Saft" },
            { kana: "ãƒ“ãƒ¼ãƒ«", romaji: "biru", german: "Bier" },
            { kana: "ãŠã•ã‘", romaji: "osake", german: "Alkohol, Sake" },
            { kana: "ãƒ“ãƒ‡ã‚ª", romaji: "bideo", german: "Video" },
            { kana: "ãˆã„ãŒ", romaji: "eiga", german: "Film" },
            { kana: "ã¦ãŒã¿", romaji: "tegami", german: "Brief" },
            { kana: "ãƒ¬ãƒãƒ¼ãƒˆ", romaji: "repoto", german: "Bericht" },
            { kana: "ã—ã‚ƒã—ã‚“", romaji: "shashin", german: "Foto" },
            { kana: "ã¿ã›", romaji: "mise", german: "GeschÃ¤ft" },
            { kana: "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³", romaji: "resutoran", german: "Restaurant" },
            { kana: "ã«ã‚", romaji: "niwa", german: "Garten" },
            { kana: "ã—ã‚…ãã ã„", romaji: "shukudai", german: "Hausaufgabe" },
            { kana: "ãƒ†ãƒ‹ã‚¹", romaji: "tenisu", german: "Tennis" },
            { kana: "ã‚µãƒƒã‚«ãƒ¼", romaji: "sakka", german: "FuÃŸball" },
            { kana: "ãŠã¯ãªã¿", romaji: "ohanami", german: "KirschblÃ¼tenschau" },
            { kana: "ãªã«", romaji: "nani", german: "was" },
            { kana: "ã„ã£ã—ã‚‡ã«", romaji: "issho ni", german: "zusammen" },
            { kana: "ã¡ã‚‡ã£ã¨", romaji: "chotto", german: "ein wenig" },
            { kana: "ã„ã¤ã‚‚", romaji: "itsumo", german: "immer" },
            { kana: "ã¨ãã©ã", romaji: "tokidoki", german: "manchmal" },
            { kana: "ãã‚Œã‹ã‚‰", romaji: "sorekara", german: "danach, dann" },
            { kana: "ãˆãˆ", romaji: "ee", german: "Ja." },
            { kana: "ã„ã„ã§ã™ã­", romaji: "ii desu ne", german: "Gut!" },
            { kana: "ã‚ã‹ã‚Šã¾ã—ãŸ", romaji: "wakarimashita", german: "Ich habe verstanden." },
            // Lesson 7
            { kana: "ãã‚Šã¾ã™", romaji: "kirimasu", german: "schneiden" },
            { kana: "ãŠãã‚Šã¾ã™", romaji: "okurimasu", german: "schicken" },
            { kana: "ã‚ã’ã¾ã™", romaji: "agemasu", german: "geben" },
            { kana: "ã‚‚ã‚‰ã„ã¾ã™", romaji: "moraimasu", german: "bekommen" },
            { kana: "ã‹ã—ã¾ã™", romaji: "kashimasu", german: "verleihen" },
            { kana: "ã‹ã‚Šã¾ã™", romaji: "karimasu", german: "ausleihen" },
            { kana: "ãŠã—ãˆã¾ã™", romaji: "oshiemasu", german: "lehren" },
            { kana: "ãªã‚‰ã„ã¾ã™", romaji: "naraimasu", german: "lernen (von jmdm.)" },
            { kana: "ã‹ã‘ã¾ã™", romaji: "kakemasu", german: "anrufen" },
            { kana: "ã¦", romaji: "te", german: "Hand" },
            { kana: "ã¯ã—", romaji: "hashi", german: "StÃ¤bchen" },
            { kana: "ã‚¹ãƒ—ãƒ¼ãƒ³", romaji: "supun", german: "LÃ¶ffel" },
            { kana: "ãƒŠã‚¤ãƒ•", romaji: "naifu", german: "Messer" },
            { kana: "ãƒ•ã‚©ãƒ¼ã‚¯", romaji: "foku", german: "Gabel" },
            { kana: "ã¯ã•ã¿", romaji: "hasami", german: "Schere" },
            { kana: "ãƒ‘ã‚½ã‚³ãƒ³", romaji: "pasokon", german: "Computer" },
            { kana: "ã‘ã„ãŸã„", romaji: "ketai", german: "Handy" },
            { kana: "ãƒ¡ãƒ¼ãƒ«", romaji: "meru", german: "E-Mail" },
            { kana: "ã­ã‚“ãŒã˜ã‚‡ã†", romaji: "nengajo", german: "Neujahrskarte" },
            { kana: "ãƒ‘ãƒ³ãƒ", romaji: "panchi", german: "Locher" },
            { kana: "ãƒ›ãƒƒãƒã‚­ã‚¹", romaji: "hotchikisu", german: "Hefter" },
            { kana: "ã‚»ãƒ­ãƒ†ãƒ¼ãƒ—", romaji: "serotepu", german: "Klebeband" },
            { kana: "ã‘ã—ã‚´ãƒ ", romaji: "keshigomu", german: "Radiergummi" },
            { kana: "ã‹ã¿", romaji: "kami", german: "Papier" },
            { kana: "ã¯ãª", romaji: "hana", german: "Blume" },
            { kana: "ã‚·ãƒ£ãƒ„", romaji: "shatsu", german: "Hemd" },
            { kana: "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ", romaji: "purezento", german: "Geschenk" },
            { kana: "ã«ã‚‚ã¤", romaji: "nimotsu", german: "GepÃ¤ck" },
            { kana: "ãŠã‹ã­", romaji: "okane", german: "Geld" },
            { kana: "ãã£ã·", romaji: "kippu", german: "Fahrkarte" },
            { kana: "ã‚¯ãƒªã‚¹ãƒã‚¹", romaji: "kurisumasu", german: "Weihnachten" },
            { kana: "ã¡ã¡", romaji: "chichi", german: "mein Vater" },
            { kana: "ã¯ã¯", romaji: "haha", german: "meine Mutter" },
            { kana: "ãŠã¨ã†ã•ã‚“", romaji: "otosan", german: "Vater (Anrede)" },
            { kana: "ãŠã‹ã‚ã•ã‚“", romaji: "okasan", german: "Mutter (Anrede)" },
            { kana: "ã‚‚ã†", romaji: "mo", german: "schon" },
            { kana: "ã¾ã ", romaji: "mada", german: "noch nicht" },
            { kana: "ã“ã‚Œã‹ã‚‰", romaji: "korekara", german: "von jetzt an" },
            { kana: "ã‚Šã‚‡ã“ã†", romaji: "ryoko", german: "Reise" },
            // Lesson 8
            { kana: "ãã‚Œã„", romaji: "kirei", german: "hÃ¼bsch, sauber" },
            { kana: "ãƒãƒ³ã‚µãƒ ", romaji: "hansamu", german: "gut aussehend" },
            { kana: "ã«ãã‚„ã‹", romaji: "nigiyaka", german: "belebt" },
            { kana: "ã—ãšã‹", romaji: "shizuka", german: "ruhig" },
            { kana: "ã‚†ã†ã‚ã„", romaji: "yumei", german: "berÃ¼hmt" },
            { kana: "ã—ã‚“ã›ã¤", romaji: "shinsetsu", german: "freundlich" },
            { kana: "ã’ã‚“ã", romaji: "genki", german: "gesund, munter" },
            { kana: "ã²ã¾", romaji: "hima", german: "frei (Zeit)" },
            { kana: "ã¹ã‚“ã‚Š", romaji: "benri", german: "praktisch" },
            { kana: "ãŠãŠãã„", romaji: "oki", german: "groÃŸ" },
            { kana: "ã¡ã„ã•ã„", romaji: "chisai", german: "klein" },
            { kana: "ã‚ãŸã‚‰ã—ã„", romaji: "atarashi", german: "neu" },
            { kana: "ãµã‚‹ã„", romaji: "furui", german: "alt (Dinge)" },
            { kana: "ã„ã„", romaji: "ii", german: "gut" },
            { kana: "ã‚ã‚‹ã„", romaji: "warui", german: "schlecht" },
            { kana: "ã‚ã¤ã„", romaji: "atsui", german: "heiÃŸ" },
            { kana: "ã•ã‚€ã„", romaji: "samui", german: "kalt (Wetter)" },
            { kana: "ã¤ã‚ãŸã„", romaji: "tsumetai", german: "kalt (Gegenstand)" },
            { kana: "ã‚€ãšã‹ã—ã„", romaji: "muzukashi", german: "schwierig" },
            { kana: "ã‚„ã•ã—ã„", romaji: "yasashi", german: "einfach" },
            { kana: "ãŸã‹ã„", romaji: "takai", german: "teuer, hoch" },
            { kana: "ã‚„ã™ã„", romaji: "yasui", german: "billig" },
            { kana: "ã²ãã„", romaji: "hikui", german: "niedrig" },
            { kana: "ãŠã‚‚ã—ã‚ã„", romaji: "omoshiroi", german: "interessant" },
            { kana: "ãŠã„ã—ã„", romaji: "oishii", german: "lecker" },
            { kana: "ã„ããŒã—ã„", romaji: "isogashii", german: "beschÃ¤ftigt" },
            { kana: "ãŸã®ã—ã„", romaji: "tanoshii", german: "lustig" },
            { kana: "ã—ã‚ã„", romaji: "shiroi", german: "weiÃŸ" },
            { kana: "ãã‚ã„", romaji: "kuroi", german: "schwarz" },
            { kana: "ã‚ã‹ã„", romaji: "akai", german: "rot" },
            { kana: "ã‚ãŠã„", romaji: "aoi", german: "blau" },
            { kana: "ã•ãã‚‰", romaji: "sakura", german: "KirschblÃ¼te" },
            { kana: "ã‚„ã¾", romaji: "yama", german: "Berg" },
            { kana: "ã¾ã¡", romaji: "machi", german: "Stadt" },
            { kana: "ãŸã¹ã‚‚ã®", romaji: "tabemono", german: "Essen" },
            { kana: "ã¨ã“ã‚", romaji: "tokoro", german: "Ort" },
            { kana: "ã‚Šã‚‡ã†", romaji: "ryo", german: "Wohnheim" },
            { kana: "ã›ã„ã‹ã¤", romaji: "seikatsu", german: "Leben, Alltag" },
            { kana: "ã—ã”ã¨", romaji: "shigoto", german: "Arbeit" },
            { kana: "ã©ã†", romaji: "do", german: "wie" },
            { kana: "ã©ã‚“ãª", romaji: "donna", german: "was fÃ¼r ein/e" },
            { kana: "ã¨ã¦ã‚‚", romaji: "totemo", german: "sehr" },
            { kana: "ã‚ã¾ã‚Š", romaji: "amari", german: "nicht so sehr" },
            { kana: "ãã—ã¦", romaji: "soshite", german: "und (Satzverbindung)" },
            // Lesson 9
            { kana: "ã‚ã‹ã‚Šã¾ã™", romaji: "wakarimasu", german: "verstehen" },
            { kana: "ã‚ã‚Šã¾ã™", romaji: "arimasu", german: "haben, besitzen" },
            { kana: "ã™ã", romaji: "suki", german: "mÃ¶gen" },
            { kana: "ãã‚‰ã„", romaji: "kirai", german: "nicht mÃ¶gen" },
            { kana: "ã˜ã‚‡ã†ãš", romaji: "jozu", german: "gut sein in" },
            { kana: "ã¸ãŸ", romaji: "heta", german: "schlecht sein in" },
            { kana: "ã‚Šã‚‡ã†ã‚Š", romaji: "ryori", german: "Gericht" },
            { kana: "ã®ã¿ã‚‚ã®", romaji: "nomimono", german: "GetrÃ¤nk" },
            { kana: "ã‚¹ãƒãƒ¼ãƒ„", romaji: "supotsu", german: "Sport" },
            { kana: "ã‚„ãã‚…ã†", romaji: "yakyu", german: "Baseball" },
            { kana: "ãƒ€ãƒ³ã‚¹", romaji: "dansu", german: "Tanz" },
            { kana: "ãŠã‚“ãŒã", romaji: "ongaku", german: "Musik" },
            { kana: "ã†ãŸ", romaji: "uta", german: "Lied" },
            { kana: "ã‚¯ãƒ©ã‚·ãƒƒã‚¯", romaji: "kurashikku", german: "klassische Musik" },
            { kana: "ã‚¸ãƒ£ã‚º", romaji: "jazu", german: "Jazz" },
            { kana: "ã‚³ãƒ³ã‚µãƒ¼ãƒˆ", romaji: "konsato", german: "Konzert" },
            { kana: "ã‚«ãƒ©ã‚ªã‚±", romaji: "karaoke", german: "Karaoke" },
            { kana: "ã‹ã¶ã", romaji: "kabuki", german: "Kabuki" },
            { kana: "ãˆ", romaji: "e", german: "Bild" },
            { kana: "ã˜", romaji: "ji", german: "Schriftzeichen" },
            { kana: "ãƒ­ãƒ¼ãƒã˜", romaji: "romaji", german: "lateinische Buchstaben" },
            { kana: "ã“ã¾ã‹ã„ãŠã‹ã­", romaji: "komakai okane", german: "Kleingeld" },
            { kana: "ãƒã‚±ãƒƒãƒˆ", romaji: "chiketto", german: "Ticket" },
            { kana: "ã˜ã‹ã‚“", romaji: "jikan", german: "Zeit" },
            { kana: "ã‚ˆã†ã˜", romaji: "yoji", german: "Angelegenheit" },
            { kana: "ã‚„ããã", romaji: "yakusoku", german: "Verabredung" },
            { kana: "ã”ã—ã‚…ã˜ã‚“", romaji: "goshujin", german: "Ehemann (Anrede)" },
            { kana: "ãŠã£ã¨", romaji: "otto", german: "mein Ehemann" },
            { kana: "ãŠãã•ã‚“", romaji: "okusan", german: "Ehefrau (Anrede)" },
            { kana: "ã¤ã¾", romaji: "tsuma", german: "meine Ehefrau" },
            { kana: "ã“ã©ã‚‚", romaji: "kodomo", german: "Kind" },
            { kana: "ã‚ˆã", romaji: "yoku", german: "gut, oft" },
            { kana: "ã ã„ãŸã„", romaji: "daitai", german: "ungefÃ¤hr" },
            { kana: "ãŸãã•ã‚“", romaji: "takusan", german: "viel" },
            { kana: "ã™ã“ã—", romaji: "sukoshi", german: "ein wenig" },
            { kana: "ãœã‚“ãœã‚“", romaji: "zenzen", german: "Ã¼berhaupt nicht" },
            { kana: "ã¯ã‚„ã", romaji: "hayaku", german: "frÃ¼h, schnell" },
            { kana: "ã©ã†ã—ã¦", romaji: "doshite", german: "warum" },
            // Lesson 10
            { kana: "ã„ã¾ã™", romaji: "imasu", german: "da sein (Lebewesen)" },
            { kana: "ã„ã‚ã„ã‚", romaji: "iroiro", german: "verschiedene" },
            { kana: "ãŠã¨ã“ã®ã²ã¨", romaji: "otoko no hito", german: "Mann" },
            { kana: "ãŠã‚“ãªã®ã²ã¨", romaji: "onna no hito", german: "Frau" },
            { kana: "ãŠã¨ã“ã®ã“", romaji: "otoko no ko", german: "Junge" },
            { kana: "ãŠã‚“ãªã®ã“", romaji: "onna no ko", german: "MÃ¤dchen" },
            { kana: "ã„ã¬", romaji: "inu", german: "Hund" },
            { kana: "ã­ã“", romaji: "neko", german: "Katze" },
            { kana: "ã", romaji: "ki", german: "Baum" },
            { kana: "ã‚‚ã®", romaji: "mono", german: "Sache, Gegenstand" },
            { kana: "ã§ã‚“ã¡", romaji: "denchi", german: "Batterie" },
            { kana: "ã¯ã“", romaji: "hako", german: "Kiste" },
            { kana: "ã‚¹ã‚¤ãƒƒãƒ", romaji: "suitchi", german: "Schalter" },
            { kana: "ã‚Œã„ãã†ã“", romaji: "reizoko", german: "KÃ¼hlschrank" },
            { kana: "ãƒ†ãƒ¼ãƒ–ãƒ«", romaji: "teburu", german: "Tisch" },
            { kana: "ãƒ™ãƒƒãƒ‰", romaji: "beddo", german: "Bett" },
            { kana: "ãŸãª", romaji: "tana", german: "Regal" },
            { kana: "ãƒ‰ã‚¢", romaji: "doa", german: "TÃ¼r" },
            { kana: "ã¾ã©", romaji: "mado", german: "Fenster" },
            { kana: "ãƒã‚¹ãƒˆ", romaji: "posuto", german: "Briefkasten" },
            { kana: "ãƒ“ãƒ«", romaji: "biru", german: "GebÃ¤ude" },
            { kana: "ã“ã†ãˆã‚“", romaji: "koen", german: "Park" },
            { kana: "ãã£ã•ã¦ã‚“", romaji: "kissaten", german: "CafÃ©" },
            { kana: "ã€œã‚„", romaji: "ya", german: "...-Laden" },
            { kana: "ã®ã‚Šã°", romaji: "noriba", german: "Haltestelle" },
            { kana: "ã‘ã‚“", romaji: "ken", german: "PrÃ¤fektur" },
            { kana: "ã†ãˆ", romaji: "ue", german: "oben, auf" },
            { kana: "ã—ãŸ", romaji: "shita", german: "unten, unter" },
            { kana: "ã¾ãˆ", romaji: "mae", german: "vor" },
            { kana: "ã†ã—ã‚", romaji: "ushiro", german: "hinter" },
            { kana: "ã¿ã", romaji: "migi", german: "rechts" },
            { kana: "ã²ã ã‚Š", romaji: "hidari", german: "links" },
            { kana: "ãªã‹", romaji: "naka", german: "in, drinnen" },
            { kana: "ãã¨", romaji: "soto", german: "auÃŸen, drauÃŸen" },
            { kana: "ã¨ãªã‚Š", romaji: "tonari", german: "neben" },
            { kana: "ã¡ã‹ã", romaji: "chikaku", german: "in der NÃ¤he" },
            { kana: "ã‚ã„ã ", romaji: "aida", german: "zwischen" },
            // Lesson 11
            { kana: "ã‹ã‹ã‚Šã¾ã™", romaji: "kakarimasu", german: "dauern, kosten" },
            { kana: "ã²ã¨ã¤", romaji: "hitotsu", german: "ein StÃ¼ck" },
            { kana: "ãµãŸã¤", romaji: "futatsu", german: "zwei StÃ¼ck" },
            { kana: "ã¿ã£ã¤", romaji: "mittsu", german: "drei StÃ¼ck" },
            { kana: "ã‚ˆã£ã¤", romaji: "yottsu", german: "vier StÃ¼ck" },
            { kana: "ã„ã¤ã¤", romaji: "itsutsu", german: "fÃ¼nf StÃ¼ck" },
            { kana: "ã‚€ã£ã¤", romaji: "muttsu", german: "sechs StÃ¼ck" },
            { kana: "ãªãªã¤", romaji: "nanatsu", german: "sieben StÃ¼ck" },
            { kana: "ã‚„ã£ã¤", romaji: "yattsu", german: "acht StÃ¼ck" },
            { kana: "ã“ã“ã®ã¤", romaji: "kokonotsu", german: "neun StÃ¼ck" },
            { kana: "ã¨ãŠ", romaji: "to", german: "zehn StÃ¼ck" },
            { kana: "ã„ãã¤", romaji: "ikutsu", german: "wie viele?" },
            { kana: "ã²ã¨ã‚Š", romaji: "hitori", german: "eine Person" },
            { kana: "ãµãŸã‚Š", romaji: "futari", german: "zwei Personen" },
            { kana: "ã€œã«ã‚“", romaji: "nin", german: "... Personen" },
            { kana: "ã€œã ã„", romaji: "dai", german: "ZÃ¤hleinheit (Maschinen)" },
            { kana: "ã€œã¾ã„", romaji: "mai", german: "ZÃ¤hleinheit (flache Dinge)" },
            { kana: "ã€œã‹ã„", romaji: "kai", german: "... Mal" },
            { kana: "ã‚Šã‚“ã”", romaji: "ringo", german: "Apfel" },
            { kana: "ã¿ã‹ã‚“", romaji: "mikan", german: "Mandarine" },
            { kana: "ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ", romaji: "sandoitchi", german: "Sandwich" },
            { kana: "ã‚«ãƒ¬ãƒ¼", romaji: "kare", german: "Curryreis" },
            { kana: "ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ", romaji: "aisukurimu", german: "Eiscreme" },
            { kana: "ãã£ã¦", romaji: "kitte", german: "Briefmarke" },
            { kana: "ã¯ãŒã", romaji: "hagaki", german: "Postkarte" },
            { kana: "ãµã†ã¨ã†", romaji: "futo", german: "Umschlag" },
            { kana: "ã‚Šã‚‡ã†ã—ã‚“", romaji: "ryoshin", german: "Eltern" },
            { kana: "ãã‚‡ã†ã ã„", romaji: "kyodai", german: "Geschwister" },
            { kana: "ã‚ã«", romaji: "ani", german: "Ã¤lterer Bruder" },
            { kana: "ãŠã«ã„ã•ã‚“", romaji: "onisan", german: "Ã¤lterer Bruder (Anrede)" },
            { kana: "ã‚ã­", romaji: "ane", german: "Ã¤ltere Schwester" },
            { kana: "ãŠã­ãˆã•ã‚“", romaji: "onesan", german: "Ã¤ltere Schwester (Anrede)" },
            { kana: "ãŠã¨ã†ã¨", romaji: "ototo", german: "jÃ¼ngerer Bruder" },
            { kana: "ãŠã¨ã†ã¨ã•ã‚“", romaji: "ototosan", german: "jÃ¼ngerer Bruder (Anrede)" },
            { kana: "ã„ã‚‚ã†ã¨", romaji: "imoto", german: "jÃ¼ngere Schwester" },
            { kana: "ã„ã‚‚ã†ã¨ã•ã‚“", romaji: "imotosan", german: "jÃ¼ngere Schwester (Anrede)" },
            { kana: "ãŒã„ã“ã", romaji: "gaikoku", german: "Ausland" },
            { kana: "ã€œã˜ã‹ã‚“", romaji: "jikan", german: "... Stunden" },
            { kana: "ã€œã—ã‚…ã†ã‹ã‚“", romaji: "shukan", german: "... Wochen" },
            { kana: "ã€œã‹ã’ã¤", romaji: "kagetsu", german: "... Monate" },
            { kana: "ã€œã­ã‚“", romaji: "nen", german: "... Jahre" },
            { kana: "ã€œãã‚‰ã„", romaji: "gurai", german: "ungefÃ¤hr ..." },
            { kana: "ã©ã®ãã‚‰ã„", romaji: "donokurai", german: "wie lange" },
            { kana: "ãœã‚“ã¶ã§", romaji: "zenbu de", german: "insgesamt" },
            { kana: "ã¿ã‚“ãª", romaji: "minna", german: "alle, alles" },
            { kana: "ã€œã ã‘", romaji: "dake", german: "nur ..." },
            // Lesson 12
            { kana: "ã‹ã‚“ãŸã‚“", romaji: "kantan", german: "einfach, leicht" },
            { kana: "ã¡ã‹ã„", romaji: "chikai", german: "nah" },
            { kana: "ã¨ãŠã„", romaji: "toi", german: "fern, weit" },
            { kana: "ã¯ã‚„ã„", romaji: "hayai", german: "schnell" },
            { kana: "ãŠãã„", romaji: "osoi", german: "langsam, spÃ¤t" },
            { kana: "ãŠãŠã„", romaji: "ooi", german: "viele (Menschen)" },
            { kana: "ã™ããªã„", romaji: "sukunai", german: "wenige (Menschen)" },
            { kana: "ã‚ãŸãŸã‹ã„", romaji: "atatakai", german: "warm" },
            { kana: "ã™ãšã—ã„", romaji: "suzushii", german: "kÃ¼hl" },
            { kana: "ã‚ã¾ã„", romaji: "amai", german: "sÃ¼ÃŸ" },
            { kana: "ã‹ã‚‰ã„", romaji: "karai", german: "scharf" },
            { kana: "ãŠã‚‚ã„", romaji: "omoi", german: "schwer (Gewicht)" },
            { kana: "ã‹ã‚‹ã„", romaji: "karui", german: "leicht (Gewicht)" },
            { kana: "ãã›ã¤", romaji: "kisetsu", german: "Jahreszeit" },
            { kana: "ã¯ã‚‹", romaji: "haru", german: "FrÃ¼hling" },
            { kana: "ãªã¤", romaji: "natsu", german: "Sommer" },
            { kana: "ã‚ã", romaji: "aki", german: "Herbst" },
            { kana: "ãµã‚†", romaji: "fuyu", german: "Winter" },
            { kana: "ã¦ã‚“ã", romaji: "tenki", german: "Wetter" },
            { kana: "ã‚ã‚", romaji: "ame", german: "Regen" },
            { kana: "ã‚†ã", romaji: "yuki", german: "Schnee" },
            { kana: "ãã‚‚ã‚Š", romaji: "kumori", german: "bewÃ¶lkt" },
            { kana: "ãƒ›ãƒ†ãƒ«", romaji: "hoteru", german: "Hotel" },
            { kana: "ãã†ã“ã†", romaji: "kuko", german: "Flughafen" },
            { kana: "ã†ã¿", romaji: "umi", german: "Meer" },
            { kana: "ã›ã‹ã„", romaji: "sekai", german: "Welt" },
            { kana: "ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼", romaji: "pati", german: "Party" },
            { kana: "ãŠã¾ã¤ã‚Š", romaji: "omatsuri", german: "Fest" },
            { kana: "ã—ã‘ã‚“", romaji: "shiken", german: "PrÃ¼fung" },
            { kana: "ã™ãã‚„ã", romaji: "sukiyaki", german: "Sukiyaki" },
            { kana: "ã•ã—ã¿", romaji: "sashimi", german: "Sashimi" },
            { kana: "ã™ã—", romaji: "sushi", german: "Sushi" },
            { kana: "ã¦ã‚“ã·ã‚‰", romaji: "tenpura", german: "Tempura" },
            { kana: "ã„ã‘ã°ãª", romaji: "ikebana", german: "Ikebana" },
            { kana: "ã‚‚ã¿ã˜", romaji: "momiji", german: "AhornblÃ¤tter" },
            { kana: "ã©ã¡ã‚‰ã‚‚", romaji: "dochira mo", german: "beide" },
            { kana: "ã„ã¡ã°ã‚“", romaji: "ichiban", german: "am meisten" },
            { kana: "ãšã£ã¨", romaji: "zutto", german: "bei weitem" },
            { kana: "ã¯ã˜ã‚ã¦", romaji: "hajimete", german: "zum ersten Mal" },
            { kana: "ãŸã ã„ã¾", romaji: "tadaima", german: "Ich bin wieder da." },
            { kana: "ãŠã‹ãˆã‚Šãªã•ã„", romaji: "okaerinasai", german: "Willkommen zurÃ¼ck." }
        ];

        // --- DOM Elements ---
        const settingsScreen = document.getElementById('settingsScreen');
        const learningScreen = document.getElementById('learningScreen');
        const useHiraganaCheckbox = document.getElementById('useHiragana');
        const useKatakanaCheckbox = document.getElementById('useKatakana');
        const useExtendedKatakanaCheckbox = document.getElementById('useExtendedKatakana');
        const useVocabularyCheckbox = document.getElementById('useVocabulary');
        const noSetSelectedError = document.getElementById('noSetSelectedError');
        const startButton = document.getElementById('startButton');
        
        const progressBar = document.getElementById('progressBar');
        const progressLabel = document.getElementById('progressLabel');
        const characterDisplay = document.getElementById('characterDisplay');
        const romajiInput = document.getElementById('romajiInput');
        const submitGuessButton = document.getElementById('submitGuessButton');
        const showAnswerButton = document.getElementById('showAnswerButton');
        const feedbackArea = document.getElementById('feedbackArea');
        
        const queueCountDisplay = document.getElementById('queueCountDisplay');
        const attemptCountDisplay = document.getElementById('attemptCountDisplay');
        
        const nextCharacterButton = document.getElementById('nextCharacterButton');
        const resetSessionButton = document.getElementById('resetSessionButton');
        const backToSettingsButton = document.getElementById('backToSettingsButton');
        const completionMessage = document.getElementById('completionMessage');
        const finalScore = document.getElementById('finalScore');
        const restartButton = document.getElementById('restartButton');

        // --- App State ---
        let selectedInitialChars = []; 
        let practiceQueue = []; 
        let currentKanaObject = null; 
        let timesCorrectNeeded = {};
        let score = { mastered: 0, attempts: 0 };
        let totalInitialChars = 0; 
        let characterAttemptedThisTurn = false;

        // --- Functions ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initializeSessionState() {
            totalInitialChars = selectedInitialChars.length;
            practiceQueue = shuffleArray([...selectedInitialChars]); 
            timesCorrectNeeded = {}; 
            score = { mastered: 0, attempts: 0 };
            
            completionMessage.classList.add('hidden');
            showMainLearningUI();
            loadNextCharacterFromQueue();
        }

        function startLearningSession() {
            const includeHiragana = useHiraganaCheckbox.checked;
            const includeKatakana = useKatakanaCheckbox.checked;
            const includeExtendedKatakana = useExtendedKatakanaCheckbox.checked;
            const includeVocabulary = useVocabularyCheckbox.checked;

            selectedInitialChars = [];
            if (includeHiragana) selectedInitialChars.push(...hiraganaChars);
            if (includeKatakana) selectedInitialChars.push(...katakanaChars);
            if (includeExtendedKatakana) selectedInitialChars.push(...extendedKatakanaChars);
            if (includeVocabulary) selectedInitialChars.push(...vocabularyL1_12);

            if (selectedInitialChars.length === 0) {
                noSetSelectedError.classList.remove('hidden');
                return;
            }
            noSetSelectedError.classList.add('hidden');
            
            settingsScreen.classList.add('hidden');
            learningScreen.classList.remove('hidden');
            initializeSessionState();
        }
        
        function resetCurrentSession() {
            if (selectedInitialChars.length === 0) {
                goBackToSettings();
                return;
            }
            initializeSessionState();
        }

        function loadNextCharacterFromQueue() {
             if (practiceQueue.length === 0) { 
                const unmasteredChars = selectedInitialChars.filter(char => timesCorrectNeeded.hasOwnProperty(char.kana));
                if (unmasteredChars.length > 0) {
                    practiceQueue = shuffleArray([...unmasteredChars]);
                } else if (totalInitialChars > 0 && score.mastered === totalInitialChars) {
                    displayCompletion();
                    return;
                } else if (totalInitialChars === 0) {
                    goBackToSettings();
                    return;
                }
                if (practiceQueue.length === 0) {
                     if (totalInitialChars > 0 && score.mastered === totalInitialChars) displayCompletion();
                     else {
                        goBackToSettings();
                     }
                    return;
                }
            }
            
            currentKanaObject = practiceQueue.shift();

            characterDisplay.textContent = currentKanaObject.kana;
            characterDisplay.classList.remove('kana-enter');
            void characterDisplay.offsetWidth; 
            characterDisplay.classList.add('kana-enter');

            romajiInput.value = '';
            romajiInput.readOnly = false;
            feedbackArea.textContent = '';
            feedbackArea.className = 'text-center text-base sm:text-lg min-h-[2.5em] mb-4 font-semibold';
            submitGuessButton.disabled = false;
            showAnswerButton.disabled = false;
            nextCharacterButton.disabled = true;
            characterAttemptedThisTurn = false;
            
            updateStatsDisplay();
            romajiInput.focus();
        }
        
        function updateStatsDisplay() {
            score.mastered = selectedInitialChars.filter(char => !timesCorrectNeeded.hasOwnProperty(char.kana)).length;

            const masteryPercentage = totalInitialChars > 0 ? (score.mastered / totalInitialChars) * 100 : 0;
            progressBar.style.width = `${masteryPercentage}%`;
            progressLabel.textContent = `Mastered: ${score.mastered} / ${totalInitialChars}`;
            
            let itemsEffectivelyInQueue = practiceQueue.length;
            if (currentKanaObject && !nextCharacterButton.disabled) {
            } else if (currentKanaObject) {
                 itemsEffectivelyInQueue++;
            }
            queueCountDisplay.textContent = `In Queue: ${itemsEffectivelyInQueue}`;
            attemptCountDisplay.textContent = `Attempts: ${score.attempts}`;
        }
        
        function getAnswerText(kanaObject) {
            const romaji = kanaObject.romaji.toLowerCase();
            if (kanaObject.german) {
                return `${romaji} (${kanaObject.german})`;
            }
            return romaji;
        }

        function processAnswer(isCorrect) {
            if (!currentKanaObject) return;
            const kanaKey = currentKanaObject.kana;

            if (isCorrect) {
                feedbackArea.textContent = 'Correct! ğŸ‰';
                feedbackArea.classList.add('feedback-correct');

                if (timesCorrectNeeded.hasOwnProperty(kanaKey)) { 
                    timesCorrectNeeded[kanaKey]--;
                    if (timesCorrectNeeded[kanaKey] <= 0) {
                        delete timesCorrectNeeded[kanaKey];
                    }
                }
            } else {
                feedbackArea.textContent = `Incorrect. The correct answer is: ${getAnswerText(currentKanaObject)}`;
                feedbackArea.classList.add('feedback-incorrect');
                timesCorrectNeeded[kanaKey] = 2;
                practiceQueue.push(currentKanaObject);
                shuffleArray(practiceQueue);
            }
            
            romajiInput.readOnly = true;
            submitGuessButton.disabled = true;
            showAnswerButton.disabled = true;
            nextCharacterButton.disabled = false;
            updateStatsDisplay();
            romajiInput.focus();
        }

        function handleGuess() {
            if (characterAttemptedThisTurn || !currentKanaObject) return;
            const guess = romajiInput.value.trim().toLowerCase();
            
            if (!guess) {
                feedbackArea.textContent = "Please enter a Romaji.";
                feedbackArea.className = 'text-center text-base sm:text-lg min-h-[2.5em] mb-4 font-semibold text-yellow-600';
                return;
            }

            characterAttemptedThisTurn = true;
            score.attempts++;
            processAnswer(guess === currentKanaObject.romaji.toLowerCase());
        }

        function handleShowAnswer() {
            if (characterAttemptedThisTurn || !currentKanaObject) return;
            
            characterAttemptedThisTurn = true;
            score.attempts++;
            feedbackArea.textContent = `The answer is: ${getAnswerText(currentKanaObject)}`;
            feedbackArea.className = 'text-center text-base sm:text-lg min-h-[2.5em] mb-4 font-semibold text-blue-600';
            
            processAnswer(false);
        }
        
        function showMainLearningUI() {
            characterDisplay.classList.remove('hidden');
            learningScreen.querySelector('#romajiInput').parentElement.classList.remove('hidden');
            learningScreen.querySelector('#submitGuessButton').parentElement.classList.remove('hidden');
            learningScreen.querySelector('#queueCountDisplay').parentElement.classList.remove('hidden');
            learningScreen.querySelector('.progress-bar-container').classList.remove('hidden');
            progressLabel.classList.remove('hidden');
            nextCharacterButton.classList.remove('hidden');
            resetSessionButton.classList.remove('hidden');
            completionMessage.classList.add('hidden');
        }

        function hideMainLearningUI() {
            characterDisplay.classList.add('hidden');
            learningScreen.querySelector('#romajiInput').parentElement.classList.add('hidden');
            learningScreen.querySelector('#submitGuessButton').parentElement.classList.add('hidden');
            learningScreen.querySelector('#queueCountDisplay').parentElement.classList.add('hidden');
            learningScreen.querySelector('.progress-bar-container').classList.add('hidden');
            progressLabel.classList.add('hidden');
            nextCharacterButton.classList.add('hidden');
            resetSessionButton.classList.add('hidden');
        }

        function displayCompletion() {
            hideMainLearningUI();
            completionMessage.classList.remove('hidden');
            score.mastered = selectedInitialChars.filter(char => !timesCorrectNeeded.hasOwnProperty(char.kana)).length;
            finalScore.textContent = `Mastered: ${score.mastered} / ${totalInitialChars} in ${score.attempts} attempts.`;
        }
        
        function goBackToSettings() {
            learningScreen.classList.add('hidden');
            completionMessage.classList.add('hidden');
            settingsScreen.classList.remove('hidden');
            noSetSelectedError.classList.add('hidden');
        }

        // --- Event Listeners ---
        startButton.addEventListener('click', startLearningSession);
        resetSessionButton.addEventListener('click', resetCurrentSession);
        submitGuessButton.addEventListener('click', handleGuess);
        
        romajiInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault(); 
                if (!submitGuessButton.disabled) {
                    handleGuess();
                } else if (!nextCharacterButton.disabled) {
                    currentKanaObject = null;
                    loadNextCharacterFromQueue();
                }
            }
        });

        showAnswerButton.addEventListener('click', handleShowAnswer);
        nextCharacterButton.addEventListener('click', () => {
            currentKanaObject = null;
            loadNextCharacterFromQueue();
        });
        backToSettingsButton.addEventListener('click', goBackToSettings);
        restartButton.addEventListener('click', () => {
            goBackToSettings(); 
        });

        if (useHiraganaCheckbox) useHiraganaCheckbox.focus();

    </script>
</body>
</html>